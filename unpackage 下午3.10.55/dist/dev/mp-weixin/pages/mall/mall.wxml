<view class="page_box"><view class="top"><swiper indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{1000}}" circular="true" indicator-color="{{dotColor}}" indicator-active-color="{{dotCurColor}}" data-event-opts="{{[['change',[['swChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{swiperList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="{{[cardCur==index?'cur':'']}}"><view class="swiper-item"><image class="{{[item.className]}}" src="{{item.url}}" mode="widthFix" data-event-opts="{{[['tap',[['handleJumpEvent',['$0'],[[['swiperList','',index]]]]]]]}}" bindtap="__e"></image></view></swiper-item></block></swiper></view><view class="{{['content_box',cartShow==true?'prevent':'']}}"><view class="x-f wrapper-box"><scroll-view class="left y-f" scroll-y="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['onType',[index,'$0'],[[['categoryData','',index,'categoryType']]]]]]]}}" class="{{['type-list x-c',[(categoryType==index)?'list-active':'']]}}" bindtap="__e"><image hidden="{{!(index==1)}}" class="hot" src="{{imgUrl+'hot.png'}}" mode="widthFix"></image><view class="menuBox"><view class="menuName">{{item.g0}}</view></view><view class="{{['line',[(categoryType==index)?'line-active':'']]}}"></view></view></block></scroll-view><view class="right"><view data-event-opts="{{[['tap',[['upSort',['$event']]]]]}}" class="tab" bindtap="__e"><text class="txt">价格</text><view class="sort"><image class="{{['arrow upper',[(curTop)?'curUp':'']]}}" src="{{arrowUp}}" mode="widthFix"></image><image class="{{['arrow down',[(curBottom)?'curDown':'']]}}" src="{{arrowDown}}" mode="widthFix"></image></view></view><scroll-view class="scroll-box" scroll-y="{{true}}"><block wx:if="{{children.length>=1}}"><view class="items"><block wx:for="{{$root.l1}}" wx:for-item="list" wx:for-index="idx" wx:key="idx"><view data-event-opts="{{[['tap',[['toGoodsDetail',['$0'],[[['children','',idx,'goodsId']]]]]]]}}" class="item-list" bindtap="__e"><view class="proImg"><image src="{{goodsImgRoot+list.g1[0]}}" mode="widthFix"></image><view hidden="{{!(list.$orig.goodsStatus==1)}}" class="skuStatus"><view class="circle">暂停兑换</view></view></view><view class="proInfo"><view class="proName">{{list.$orig.goodsShortName}}</view><view class="unit"><block wx:if="{{list.$orig.goodsSpecification}}"><view>{{list.$orig.goodsSpecification+list.$orig.goodsUnitName}}</view></block></view><view class="normalPrice">{{"市场价："+list.$orig.goodsMoney+"元"}}</view><view class="price"><block wx:if="{{list.$orig.realPay!=0}}"><text><text class="danwei">¥</text>{{list.f0+''}}<block wx:if="{{list.$orig.realPay!=0&&list.$orig.realVpoints!=0}}"><text>+</text></block></text></block><block wx:if="{{list.$orig.realVpoints!=0}}"><text>{{list.f1}}<text class="danwei">积分</text></text></block></view></view><view class="car"><view data-event-opts="{{[['tap',[['addSku',[idx,'$0'],[[['children','',idx,'goodsStatus']]]]]]]}}" class="addArea" catchtap="__e"><image src="{{imgUrl+'car.png'}}" mode="widthFix"></image><view class="{{['numOfCart',[(list.$orig.specialChooseNum<=0)?'notShow':'']]}}">{{list.$orig.specialChooseNum}}</view></view></view></view></block><block wx:if="{{hasMore}}"><view data-event-opts="{{[['tap',[['getMore',['$event']]]]]}}" class="more" bindtap="__e">加载更多</view></block><block wx:else><view class="more">没有更多了商品了</view></block></view></block><block wx:else><view class="none"><view class="text">商品即将上线，请耐心等待~</view><view class="noneImg"><image src="{{imgUrl+'chooseNone.png'}}" mode="widthFix"></image></view></view></block></scroll-view><view class="settle"><view data-event-opts="{{[['tap',[['showCart',['$event']]]]]}}" class="box" bindtap="__e"><image src="{{imgUrl+'cartBox.png'}}" mode="widthFix"></image><block wx:if="{{cartNumShow}}"><view class="numOfCart">{{cartNum}}</view></block></view><view class="free"><view hidden="{{!(cartNumShow)}}"><view class="money">{{"¥"+$root.f2}}</view><view class="score">{{$root.f3}}</view></view></view><view data-event-opts="{{[['tap',[['toBuy',['$event']]]]]}}" class="buy" bindtap="__e">去结算 ></view></view></view></view></view><block wx:if="{{cartShow}}"><view class="cart"><image class="close" src="{{imgUrl+'close.png'}}" mode="widthFix" data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" bindtap="__e"></image><view class="list_box"><view class="title"><text>购物车</text><view data-event-opts="{{[['tap',[['emptyCart',['$event']]]]]}}" class="delete" bindtap="__e">清空</view></view><view class="cartGoods"><block wx:for="{{$root.l2}}" wx:for-item="cartItem" wx:for-index="index" wx:key="index"><view class="item-list"><view class="proImg"><image src="{{goodsImgRoot+cartItem.g2[0]}}" mode="widthFix"></image></view><view class="proInfo"><view class="proName">{{cartItem.$orig.goodsName}}</view><view class="unit"><block wx:if="{{cartItem.$orig.goodsSpecification}}"><view>{{cartItem.$orig.goodsSpecification+cartItem.$orig.goodsUnitName}}</view></block></view><view class="price"><block wx:if="{{cartItem.$orig.realPay!=0}}"><text><text class="danwei">¥</text>{{cartItem.f4}}</text></block><block wx:if="{{cartItem.$orig.realPay!=0&&cartItem.$orig.realVpoints!=0}}"><text>+</text></block><block wx:if="{{cartItem.$orig.realVpoints!=0}}"><text>{{cartItem.f5}}<text class="danwei">积分</text></text></block></view></view><view class="goods_num"><text data-event-opts="{{[['tap',[['reduceFuc',[index]]]]]}}" class="reduce" bindtap="__e"></text><text class="num">{{cartItem.$orig.specialChooseNum}}</text><text data-event-opts="{{[['tap',[['increaseFuc',[index]]]]]}}" class="add" bindtap="__e"></text></view></view></block></view><view class="zongji">总计：<text>{{"¥"+$root.f6}}</text>元<text class="jf">{{$root.f7}}</text>积分</view></view></view></block></view>