{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/pengboli/Desktop/v积分/xcx/山东小程序/sdqp/pages/saoDianDe/activityEntrance/activityEntrance.vue?23cd","webpack:////Users/pengboli/Desktop/v积分/xcx/山东小程序/sdqp/pages/saoDianDe/activityEntrance/activityEntrance.vue?6b94","webpack:////Users/pengboli/Desktop/v积分/xcx/山东小程序/sdqp/pages/saoDianDe/activityEntrance/activityEntrance.vue?abe0","uni-app:///pages/saoDianDe/activityEntrance/activityEntrance.vue","webpack:////Users/pengboli/Desktop/v积分/xcx/山东小程序/sdqp/pages/saoDianDe/activityEntrance/activityEntrance.vue?4e98","webpack:////Users/pengboli/Desktop/v积分/xcx/山东小程序/sdqp/pages/saoDianDe/activityEntrance/activityEntrance.vue?a6d6"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wI;AACAA,UAAU,CAACC,yBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyI;AACzI;AACoE;AACL;AACsC;;;AAGrG;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,kOAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA23B,CAAgB,8yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuB/4B;;;;;AAKA;;;;;;;;AAQA;;;;AAIA,sE;;;;;;AAMA;eACA;AACA,0BADA;AAEA;AACA,gCADA,EAFA;;AAKA,MALA,kBAKA;AACA;AACA,sCADA;AAEA,gBAFA,EAEA;AACA,iCAHA,EAGA;AACA,gCAJA,EAIA;AACA,0CALA,EAKA;AACA,kBANA;AAOA,4BAPA;AAQA,6BARA;;AAUA,GAhBA;AAiBA,QAjBA,kBAiBA,OAjBA,EAiBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,+CAVA,CAUA;;AAEA;AACA;AACA;AACA,KAHA,MAGA;AACA;AACA,KAFA,MAEA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA,qBADA;AAEA,+BAFA;AAGA,yBAHA;AAIA,eAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA,uCADA;;AAGA;AACA,SAVA;;AAYA;AACA;AACA,GApDA;AAqDA,SArDA,qBAqDA;;;AAGA,GAxDA;AAyDA,QAzDA,oBAyDA;AACA,kBADA,GACA,KADA;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAtBA;AAuBA,GAhFA;AAiFA;;;AAGA,mBApFA,6BAoFA,GApFA,EAoFA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,gCAFA;AAGA,kDAHA;;AAKA,GA7FA;AA8FA,QA9FA,oBA8FA;;AAEA,GAhGA;AAiGA;AACA,UADA,kBACA,OADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OARA,MAQA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,uBADA;AAEA,iCAFA;AAGA,2BAHA;AAIA,iBAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA,qCADA;;AAGA;AACA,WAVA;;AAYA;AACA,KAtCA;AAuCA;AACA,QAxCA,kBAwCA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;;AAEA,KAlDA;AAmDA;AACA,qBApDA,+BAoDA;AACA;;;;;;;;AAQA,oBATA,GASA,MATA;AAUA,2DAVA,SAUA,cAVA;AAWA;AACA,qCADA;AAEA,yBAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAJA,MAIA;AACA;;AAEA;AACA;;AAEA,mBAfA;AAgBA,sBAhBA,gBAgBA,GAhBA,EAgBA;AACA;AACA;AACA;AACA,qBAHA,MAGA;AACA;AACA;AACA,oFADA,+CACA,MADA,mBACA,YADA;AAEA;AACA;AACA;AACA;AACA,yBAHA,MAGA;AACA;AACA;AACA;AACA,uBAVA;AAWA;AACA,mBAlCA,IAXA;;AA+CA,KAnGA;AAoGA;AACA,kBArGA,4BAqGA;AACA;;;;;;;;;;;AAWA,8BAZA,GAYA,EAZA;AAaA,oBAbA,GAaA,MAbA;AAcA;AACA,wBAfA,GAeA,8BAfA;AAgBA,wBAhBA;;AAkBA,qDAlBA,SAkBA,kBAlBA;AAmBA,uCAnBA;AAoBA,gDApBA;;;AAuBA,gDAvBA,UAuBA,OAvBA;;AAyBA,iEAzBA,UAyBA,cAzBA;AA0BA;AACA;AACA,iBA5BA;;;;AAgCA,gDAhCA,UAgCA,QAhCA;AAiCA,kEAjCA,UAiCA,eAjCA;AAkCA;AACA;AACA,iBApCA;;AAsCA,8BAtCA;AAuCA,KA5IA;AA6IA;AACA,kBA9IA,4BA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAJA,EAIA,EAJA;;AAMA,SA3BA;;AA6BA,KA9KA;AA+KA;AACA,sBAhLA,8BAgLA,IAhLA,EAgLA;AACA;AACA;AACA;AACA;AACA;AACA,KAtLA;AAuLA;AACA,kBAxLA,0BAwLA,CAxLA,EAwLA;AACA,0BADA,GACA,QADA;AAEA,yDAFA;AAGA;AACA,wBAJA,GAIA,8BAJA;AAKA;AALA,qBAMA,0BANA;AAOA;AACA,2BARA,GAQA,0BARA;AASA,0GATA;;AAWA,uCAXA,UAWA,YAXA;AAYA,4BAZA,GAYA,wBAZA;AAaA,8EAbA;;;;;AAkBA;AACA,qCAnBA;AAoBA,KA5MA;AA6MA;AACA,kBA9MA,4BA8MA;AACA;AACA;AACA;AACA,2BADA;AAEA,uCAFA;AAGA,0BAHA;AAIA,4BAJA,EAIA;AACA,0BALA,EAKA;AACA,oBANA;AAOA,sBAPA;;AASA;AACA;AACA,UADA,CACA;AACA;AACA;AACA,OAJA;AAKA,UALA;AAMA;AACA;AACA;AACA;AACA,kBADA;;;AAIA,OAbA;AAcA;AACA;AACA;AACA,kBADA;;AAGA,OAnBA;;AAqBA,KAhPA;AAiPA;AACA,mBAlPA,6BAkPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,uCAFA;AAGA,0BAHA;AAIA,4BAJA,EAIA;AACA,0BALA,EAKA;AACA,oBANA;AAOA,sBAPA;;AASA;AACA;AACA,UADA,CACA;AACA;AACA;AACA;AACA,OALA;AAMA,UANA;AAOA;AACA;AACA;AACA;AACA,kBADA;;AAGA,OAbA;AAcA;AACA;AACA;AACA,kBADA;;AAGA,OAnBA;;AAqBA,KAlSA;AAmSA,gBAnSA,0BAmSA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA1SA;AA2SA,eA3SA,yBA2SA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,4DADA;;AAGA;AACA,KAtTA;AAuTA,mBAvTA,6BAuTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,+DADA;;AAGA;AACA,KAnUA,EAjGA,E;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAgnD,CAAgB,g6CAAG,EAAC,C;;;;;;;;;;;ACApoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/saoDianDe/activityEntrance/activityEntrance.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/saoDianDe/activityEntrance/activityEntrance.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./activityEntrance.vue?vue&type=template&id=47f70a6b&scoped=true&\"\nvar renderjs\nimport script from \"./activityEntrance.vue?vue&type=script&lang=js&\"\nexport * from \"./activityEntrance.vue?vue&type=script&lang=js&\"\nimport style0 from \"./activityEntrance.vue?vue&type=style&index=0&id=47f70a6b&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47f70a6b\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/saoDianDe/activityEntrance/activityEntrance.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityEntrance.vue?vue&type=template&id=47f70a6b&scoped=true&\"","var components = {\n  wxOpenSetting: function() {\n    return import(\n      /* webpackChunkName: \"components/wx-open-setting/wx-open-setting\" */ \"@/components/wx-open-setting/wx-open-setting.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityEntrance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityEntrance.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 扫码入口 处理判断区分  保留地址授权 -->\r\n\t<view class=\"page-template\">\r\n\t\t<view class=\"page-template-wrap page-template-wrap-bg\">\r\n\t\t\t<!-- 引导开启 位置授权 -->\r\n\t\t\t<wx-open-setting :wxOpenSettingIsShow=\"wxOpenSettingIsShow\" :isStartAnimation=\"wxOpenSettingIsStartAnimation\"\r\n\t\t\t @WxOpenSettingColse=\"WxOpenSettingColse\" @openSetting=\"wosOpenSetting\"></wx-open-setting>\r\n\t\t\t<!-- 自定义 -->\r\n\t\t\t<custom-dialog ref=\"customDialogChild\" @customDialogColse=\"updateCustomDialog\" :customDialogIsShow=\"customDialogIsShow\"\r\n\t\t\t :customDialogType=\"customDialogType\"></custom-dialog>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * \t扫码入口 \r\n\t *     区分版本跳转不同版本，崂山版和金麦版本流程需要单独做，与公用样式不同。\r\n\t * \t   不强制位置授权 （ 进入页面先判断用户是否同意授权 拒绝：弹出自定义位置引导）\r\n\t * \t   \t\t已经授权并且在缓存中能拿到 位置信息 直接调用扫码接口\r\n\t *     \t\t不同意授权引导授权 开启授权、不开启授权 在回调用调用扫码接口。关闭（点击关闭按钮、蒙层）调用扫码接口\r\n\t */\r\n\r\n\timport {\r\n\t\tget,\r\n\t\tpost,\r\n\t\tconfig\r\n\t} from '@/utils/api.js';\r\n\timport {\r\n\t\tgetLocation,\r\n\t\tanalysisMobile,\r\n\t\tcheckSession,\r\n\t\tgetCode,\r\n\t\tgetOpenid,\r\n\t\tgetSettingLocation\r\n\t} from '@/common/getWxUserInfor.js';\r\n\timport {\r\n\t\tsweepQrcode,\r\n\t\tsweepSeckill,\r\n\t} from '@/common/getData.js';\r\n\timport {\r\n\t\tjudgeBusinessCode,\r\n\t\tjudgeSeckillBusinessCode\r\n\t} from '@/common/basicsFun.js';\r\n\timport {\r\n\t\twxOpenSetting\r\n\t} from '@/components/wx-open-setting/wx-open-setting.vue'; // 开启 位置 引导\r\n\texport default {\r\n\t\tname: 'activityEntrance',\r\n\t\tcomponents: {\r\n\t\t\twxOpenSetting\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstaticUrl: config.staticUrl,\r\n\t\t\t\topenid: '', // \r\n\t\t\t\tisShowCustomLocation: false, // 是否展示 自定义 定位引导\r\n\t\t\t\twxOpenSettingIsShow: false, // 是否展示 位置授权\r\n\t\t\t\twxOpenSettingIsStartAnimation: false, // 位置授权 是否展示动画\r\n\t\t\t\tsweepstr: '',\r\n\t\t\t\tfromOpenSetting: false,\r\n\t\t\t\tisHasVjifenOpenid: true,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconst that = this;\r\n\t\t\tconsole.log('页面参数 options 176');\r\n\t\t\tconsole.log(options);\n\t\t\t\n\t\t\t// const sweepstrUrl = options.q;\n\t\t\t// this.sweepstr = sweepstrUrl;\n\t\t\t\n\t\t\tconst sweepstrUrl = decodeURIComponent(options.q);\r\n\t\t\t\n\t\t\tgetApp().globalData.sweepstr = sweepstrUrl; //目前用到 黑名单 填写信息 之后 回调本页 \n\t\t\t\r\n\t\t\tif (sweepstrUrl.indexOf('x.vjifen.com') != -1) {\r\n\t\t\t\t//测试二维码\r\n\t\t\t\tthat.sweepstr = sweepstrUrl.split('VSD/')[1];\r\n\t\t\t} else if (sweepstrUrl.indexOf('VJ1.TV/') != -1) {\r\n\t\t\t\tthat.sweepstr = sweepstrUrl.split('VSD/')[1];\r\n\t\t\t} else if (sweepstrUrl.indexOf('vj1.tv/') != -1) {\r\n\t\t\t\tthat.sweepstr = sweepstrUrl.split('VSD/')[1];\r\n\t\t\t} else {\r\n\t\t\t\tthat.sweepstr = '';\r\n\t\t\t\treturn uni.showModal({\r\n\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\tcontent: '请扫描正确的活动二维码~',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.getOpenidSD();\r\n\t\t},\r\n\t\tonReady() {\r\n\r\n\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\tconst that = this;\r\n\t\t\tthat.openid = that.openid ? that.openid : uni.getStorageSync('openid').openid;\r\n\r\n\t\t\tconsole.log(\"页面 onshow\");\r\n\t\t\tconsole.log(that.openid);\r\n\r\n\t\t\tif (that.openid && that.isHasVjifenOpenid) {\r\n\t\t\t\tconsole.log('this.getVjifenOpenid');\r\n\t\t\t\tthat.getVjifenOpenid();\r\n\t\t\t}\r\n\t\t\tif (that.openid && that.isHasVjifenOpenid == false) {\r\n\t\t\t\tthat.vjifenOpenid = that.vjifenOpenid ? that.vjifenOpenid : uni.getStorageSync('vjfOpenid').vjfOpenid;\r\n\t\t\t}\r\n\t\t\tthat.vjifenOpenid = that.vjifenOpenid ? that.vjifenOpenid : uni.getStorageSync('vjfOpenid').vjfOpenid;\r\n\r\n\t\t\tif (that.openid && that.vjifenOpenid) {\r\n\t\t\t\t// 走扫码的逻辑 检测位置微信 调用接口\r\n\t\t\t\tthis.checkUserLocation(true);\r\n\t\t\t\tconsole.log('走扫码的逻辑 检测位置微信 调用接口');\r\n\t\t\t\tconsole.log(that.openid);\r\n\t\t\t\tconsole.log(that.vjifenOpenid);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 用户点击右上角分享\r\n\t\t */\r\n\t\tonShareAppMessage(res) {\r\n\t\t\tif (res.from === 'button') {\r\n\t\t\t\t// 来自页面内分享按钮\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '青岛啤酒畅享山东',\r\n\t\t\t\tpath: '/pages/index/index',\r\n\t\t\t\timageUrl: this.staticUrl + 'fenxiangImg.png'\r\n\t\t\t};\r\n\t\t},\r\n\t\tonHide() {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonload(options) {\r\n\t\t\t\tconsole.log(options);\r\n\t\t\t\t// if (qr.indexOf('MS_') != -1) {\r\n\t\t\t\t// \tgetMS(); 秒杀 地址中带有 秒杀 调用秒杀接口\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tsweep();\r\n\t\t\t\t// }\r\n\t\t\t\tconst that = this;\r\n\t\t\t\t// 微信扫一扫进入页面会把参数放到options.q上不可修改q变量\r\n\t\t\t\tconst sweepstrUrl = decodeURIComponent(options.q);\r\n\t\t\t\tif (sweepstrUrl.indexOf('xt.vjifen.com') != -1) {\r\n\t\t\t\t\t//测试二维码\r\n\t\t\t\t\tif (sweepstrUrl.indexOf('/LN/') != -1) {\r\n\t\t\t\t\t\t//测试的微信直接打开小程序\r\n\t\t\t\t\t\tthat.sweepstr = sweepstrUrl.split('LN/')[1];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.sweepstr = sweepstrUrl.split('v=')[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (sweepstrUrl.indexOf('VJ1.TV/') != -1) {\r\n\t\t\t\t\tthat.sweepstr = sweepstrUrl.split('QQ/')[1];\r\n\t\t\t\t} else if (sweepstrUrl.indexOf('vj1.tv/') != -1) {\r\n\t\t\t\t\tthat.sweepstr = sweepstrUrl.split('QQ/')[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.sweepstr = '';\r\n\t\t\t\t\treturn uni.showModal({\r\n\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\tcontent: '请扫描正确的活动二维码~',\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 页面初始化\r\n\t\t\tinit() {\r\n\t\t\t\tconst that = this;\r\n\r\n\t\t\t\tif (getApp().globalData.isInitsweepstr == 'true') {\r\n\t\t\t\t\t// 走扫码的逻辑 检测位置微信 调用接口\r\n\t\t\t\t\tthat.checkUserLocation(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 验证缓存中 是否 存在用户位置\r\n\t\t\tasync checkUserLocation(status = false) {\r\n\t\t\t\t/**\r\n\t\t\t\t * 获从缓存中  获取 用户位置 信息\r\n\t\t\t\t * 有 直接调用 接口\r\n\t\t\t\t * 没有 调用（）   验证用户位置授权状态 2未操作 1已经授权  0拒绝授权\r\n\t\t\t\t * \t\t 0 ： 弹出自定义引导，引导用户 开启位置授权（openSetting）\r\n\t\t\t\t * \t\t 1 :  一般不会存在 缓存中没有数据 然后 已经授权 如果存在还是调用 微信授权\r\n\t\t\t\t * \t\t 2 :  继续 调用微信授权\r\n\t\t\t\t */\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tconst LocationStatus = await getSettingLocation();\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'userLocation',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconst userLocation = res.data;\r\n\t\t\t\t\t\t// 调用接口\r\n\t\t\t\t\t\tif (userLocation.longitude) {\r\n\t\t\t\t\t\t\t// that.getSweepQrcode(userLocation.longitude, userLocation.latitude, that.sweepstr, status);\r\n\r\n\t\t\t\t\t\t\tthat.sweepTypeFun(userLocation.longitude, userLocation.latitude);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// that.getSweepQrcode('', '', that.sweepstr, status);\r\n\r\n\t\t\t\t\t\t\tthat.sweepTypeFun();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tif (LocationStatus == 0) {\r\n\t\t\t\t\t\t\t// 弹出自定义 位置引导弹窗\r\n\t\t\t\t\t\t\tthat.wxOpenSettingIsShow = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 弹出 获取位置\r\n\t\t\t\t\t\t\tgetLocation().then((...res) => {\r\n\t\t\t\t\t\t\t\tconst [status, locationData] = Array.from(res[0]);\r\n\t\t\t\t\t\t\t\t// 调用接口\r\n\t\t\t\t\t\t\t\tif (status == 0) {\r\n\t\t\t\t\t\t\t\t\t// that.getSweepQrcode(locationData.longitude, locationData.latitude, that.sweepstr);\r\n\t\t\t\t\t\t\t\t\tthat.sweepTypeFun(locationData.longitude, locationData.latitude);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// that.getSweepQrcode('', '', that.sweepstr);\r\n\t\t\t\t\t\t\t\t\tthat.sweepTypeFun();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 验证缓存中 是否 存在用户信息（openid、sessiong_key）\r\n\t\t\tasync getUserDataFun() {\r\n\t\t\t\t/**\r\n\t\t\t\t * 获从缓存中  获取 用户信息（openid，session_key） 信息\r\n\t\t\t\t * 存在\r\n\t\t\t\t * \t\t验证session（checkSessionStatus） 是否过期\r\n\t\t\t\t * \t\t\t未过期 直接调用 返回 用户信息\r\n\t\t\t\t * \t\t\t过期   直接调用 重新调用获取小程序 code （getCode）拿到code 获取用户信息（getOpenid）\r\n\t\t\t\t * 没有 调用（）   验证用户位置授权状态 2未操作 1已经授权  0拒绝授权\r\n\t\t\t\t * \t\t 0 ： 弹出自定义引导，引导用户 开启位置授权（openSetting）\r\n\t\t\t\t * \t\t 1 :  一般不会存在 缓存中没有数据 然后 已经授权 如果存在还是调用 微信授权\r\n\t\t\t\t * \t\t 2 :  继续 调用微信授权\r\n\t\t\t\t */\r\n\t\t\t\tlet returnUserData = '';\r\n\t\t\t\tconst that = this;\r\n\t\t\t\t//用户缓存信息\r\n\t\t\t\tconst userData = uni.getStorageSync('userData');\r\n\t\t\t\tif (userData) {\r\n\t\t\t\t\t// 如果用户信息存在 判断 session 是否过期 0未过期 1已过期\r\n\t\t\t\t\tconst checkSessionStatus = await checkSession();\r\n\t\t\t\t\tif (checkSessionStatus == 0) {\r\n\t\t\t\t\t\treturnUserData = userData.uinfo;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 获取 小程序 code 请求接口换取 openid session_key\r\n\t\t\t\t\t\tconst xcxCode = await getCode();\r\n\t\t\t\t\t\t// 拿小程序 code 换取 openid\r\n\t\t\t\t\t\tconst backOpenidData = await getOpenid(xcxCode, 'hgqq');\r\n\t\t\t\t\t\tif (backOpenidData.uinfo) {\r\n\t\t\t\t\t\t\treturnUserData = backOpenidData.uinfo;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 获取 小程序 code 请求接口换取 openid\r\n\t\t\t\t\tconst xcxCode = await getCode();\r\n\t\t\t\t\tconst backOpenidData = await getOpenid(xcxCode, 'hgqq');\r\n\t\t\t\t\tif (backOpenidData.uinfo) {\r\n\t\t\t\t\t\treturnUserData = backOpenidData.uinfo;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn returnUserData;\r\n\t\t\t},\r\n\t\t\t// 打开微信 位置授权页面\r\n\t\t\twosOpenSetting() {\r\n\t\t\t\t//设置里打开授权地理位置\r\n\t\t\t\t// this.againClick = true;\r\n\t\t\t\tuni.openSetting({\r\n\t\t\t\t\tcomplete: res => {\r\n\t\t\t\t\t\tconsole.log('我是设置里打开授权地理位置');\r\n\t\t\t\t\t\t// 统一在onshow执行地址位置判断\r\n\t\t\t\t\t\t// this.getLocation();\r\n\t\t\t\t\t\t// return false\r\n\t\t\t\t\t\tconst that = this;\r\n\t\t\t\t\t\tthat.wxOpenSettingIsShow = false;\r\n\t\t\t\t\t\t// 开启本页面 动效\r\n\t\t\t\t\t\tif (this.isStartAnimation) {\r\n\t\t\t\t\t\t\tthis.resetInitAnimation();\r\n\t\t\t\t\t\t\tthis.startInitAnimation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 关闭了 也要继续往下走\r\n\t\t\t\t\t\t// 继续调用 接口\r\n\t\t\t\t\t\tthat.fromOpenSetting = true;\r\n\r\n\t\t\t\t\t\tthat.aecChuanImg = '';\r\n\t\t\t\t\t\tthat.aecCrownCookiesImg = '';\r\n\t\t\t\t\t\tthat.aecBaifenbai = '';\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthat.aecChuanImg = 'aec-chuanImg';\r\n\t\t\t\t\t\t\tthat.aecCrownCookiesImg = 'aec-crownCookiesImg';\r\n\t\t\t\t\t\t\tthat.aecBaifenbai = 'aec-baifenbai-end';\r\n\t\t\t\t\t\t}, 10)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 关闭 授权位置\r\n\t\t\tWxOpenSettingColse(data) {\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tthat.wxOpenSettingIsShow = false;\r\n\t\t\t\t// 关闭了 也要继续往下走\r\n\t\t\t\t// 继续调用 接口\r\n\t\t\t\tthat.sweepTypeFun();\r\n\t\t\t},\r\n\t\t\t// 获取手机号\r\n\t\t\tasync getPhoneNumber(e) {\r\n\t\t\t\tconst backDetail = e.detail;\r\n\t\t\t\tif (backDetail.errMsg.lastIndexOf('ok') != -1) {\r\n\t\t\t\t\t//成功getPhone\r\n\t\t\t\t\tconst userData = uni.getStorageSync('userData');\r\n\t\t\t\t\t//解析手机号\r\n\t\t\t\t\tif (userData.uinfo.session_key) {\r\n\t\t\t\t\t\t// this.parsePhone(e) //解析手机号码\r\n\t\t\t\t\t\tconst session_key = userData.uinfo.session_key;\r\n\t\t\t\t\t\tanalysisMobile(session_key, backDetail).then(backData => {});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst backUserData = await that.getUserDataFun();\r\n\t\t\t\t\t\tconst session_key = backUserData.session_key;\r\n\t\t\t\t\t\tanalysisMobile(session_key, backDetail);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// 无论是否同意 获取手机号 都调用方法\r\n\t\t\t\tthis.luckDrawFun();\r\n\t\t\t},\r\n\t\t\t//获取 扫码接口 返回信息 并处理\r\n\t\t\tgetSweepQrcode(longitude = '00', latitude = '00', sweepstr = '', status = false) {\r\n\t\t\t\tconsole.log('getSweepQrcodegetSweepQrcodegetSweepQrcodegetSweepQrcode');\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tvar sendParams = {\r\n\t\t\t\t\topenid: that.openid,\r\n\t\t\t\t\tvjifenOpenid: that.vjifenOpenid,\r\n\t\t\t\t\tsweepstr: sweepstr,\r\n\t\t\t\t\tlongitude: longitude, //\"经度\"\r\n\t\t\t\t\tlatitude: latitude, //\"纬度\"\r\n\t\t\t\t\tnickname: '',\r\n\t\t\t\t\theadimgurl: ''\r\n\t\t\t\t};\r\n\t\t\t\t// 调用扫码接口\r\n\t\t\t\tsweepQrcode(sendParams)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log(sendParams);\r\n\t\t\t\t\t\treturn judgeBusinessCode(res);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tres => {\r\n\t\t\t\t\t\t\tconsole.log('我是 返回处理 01');\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: res\r\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\t// 跳转 首页\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: err\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t//获取 秒杀 返回信息 并处理\r\n\t\t\tgetSweepSeckill(longitude = '00', latitude = '00', sweepstr = '', status = false) {\r\n\t\t\t\tconsole.log('getSweepQrcodegetSweepQrcodegetSweepQrcodegetSweepQrcode');\r\n\t\t\t\t// switch (qr.slice(3, 4)) { // 不同奖品 区分不同 活动规则 \r\n\t\t\t\t// \t\t\t\tcase '1':\r\n\t\t\t\t// \t\t\t\t\tsessionStorage.Ms_prizeType = '1';\r\n\t\t\t\t// \t\t\t\t\tbreak;\r\n\t\t\t\t// \t\t\t\tcase '2':\r\n\t\t\t\t// \t\t\t\t\tsessionStorage.Ms_prizeType = '2';\r\n\t\t\t\t// \t\t\t\t\tbreak;\r\n\t\t\t\t// \t\t\t\tcase '3':\r\n\t\t\t\t// \t\t\t\t\tsessionStorage.Ms_prizeType = '3';\r\n\t\t\t\t// \t\t\t\t\tbreak;\r\n\t\t\t\t// \t\t\t\tdefault:\r\n\t\t\t\t// \t\t\t\t\tsessionStorage.Ms_prizeType = '1';\r\n\t\t\t\t// \t\t\t\t\tbreak;\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tvar sendParams = {\r\n\t\t\t\t\topenid: that.openid,\n\t\t\t\t\tvjifenOpenid: that.vjifenOpenid,\r\n\t\t\t\t\tsweepstr: sweepstr,\r\n\t\t\t\t\tlongitude: longitude, //\"经度\"\r\n\t\t\t\t\tlatitude: latitude, //\"纬度\"\r\n\t\t\t\t\tnickname: '',\r\n\t\t\t\t\theadimgurl: ''\r\n\t\t\t\t};\r\n\t\t\t\t// 调用扫码接口\r\n\t\t\t\tsweepSeckill(sendParams)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('我是秒杀返回 数据');\r\n\t\t\t\t\t\tconsole.log(sendParams);\r\n\t\t\t\t\t\treturn judgeSeckillBusinessCode(res);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tres => {\r\n\t\t\t\t\t\t\tconsole.log('我是 返回处理 ');\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: res\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\t// 跳转 首页\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: err\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tsweepTypeFun(longitude = '', latitude = '') {\r\n\t\t\t\t// 判断 扫码类型 秒杀 还是 正常扫码\r\n\t\t\t\tif (this.sweepstr.indexOf('MS_') != -1) {\r\n\t\t\t\t\tthis.getSweepSeckill(longitude, latitude, this.sweepstr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getSweepQrcode(longitude, latitude, this.sweepstr);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetOpenidSD() {\r\n\t\t\t\tconst storageOpenid = uni.getStorageSync('openid');\r\n\t\t\t\tconsole.log('getOpenidSD');\r\n\t\t\t\tconsole.log(storageOpenid);\r\n\t\t\t\tif (storageOpenid) {\r\n\t\t\t\t\treturn storageOpenid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/getOpenid/getOpenid?getIdType=openid'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetVjifenOpenid() {\r\n\t\t\t\tconst storageOpenid = uni.getStorageSync('vjfOpenid');\r\n\t\t\t\tconsole.log('vjfOpenid');\r\n\t\t\t\tconsole.log(storageOpenid);\r\n\t\t\t\tthis.isHasVjifenOpenid = false;\r\n\t\t\t\tif (storageOpenid) {\r\n\t\t\t\t\treturn storageOpenid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/getOpenid/getOpenid?getIdType=vjfOpenid'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.page-template-wrap-bg {\r\n\t\t// background: url($crownCookiesImg+'crownCookiesImgBgBig.jpg') no-repeat center;\r\n\t\t// background-size: cover;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityEntrance.vue?vue&type=style&index=0&id=47f70a6b&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityEntrance.vue?vue&type=style&index=0&id=47f70a6b&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1600083421238\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}